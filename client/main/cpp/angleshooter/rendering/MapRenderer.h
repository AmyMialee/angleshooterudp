#pragma once

class MapRenderer : public sf::Drawable {
	sf::RenderTexture* mapTexture;
	sf::Sprite* mapSprite;

public:
	inline static const std::unordered_map<uint8_t, std::pair<uint8_t, uint8_t>> tileMaskToUV = {
		{0b00000010, {0, 0}},
		{0b00001010, {1, 0}},
		{0b00011010, {2, 0}},
		{0b00010010, {3, 0}},
		{0b11011010, {4, 0}},
		{0b00011011, {5, 0}},
		{0b00011110, {6, 0}},
		{0b01111010, {7, 0}},
		{0b00001011, {8, 0}},
		{0b01011111, {9, 0}},
		{0b00011111, {10, 0}},
		{0b00010110, {11, 0}},
		{0b01000010, {0, 1}},
		{0b01001010, {1, 1}},
		{0b01011010, {2, 1}},
		{0b01010010, {3, 1}},
		{0b01001011, {4, 1}},
		{0b01111111, {5, 1}},
		{0b11011111, {6, 1}},
		{0b01010110, {7, 1}},
		{0b01101011, {8, 1}},
		{0b01111110, {9, 1}},
		// {0b00000000, {10, 1}},
		{0b11011110, {11, 1}},
		{0b01000000, {0, 2}},
		{0b01001000, {1, 2}},
		{0b01011000, {2, 2}},
		{0b01010000, {3, 2}},
		{0b01101010, {4, 2}},
		{0b11111011, {5, 2}},
		{0b11111110, {6, 2}},
		{0b11010010, {7, 2}},
		{0b01111011, {8, 2}},
		{0b11111111, {9, 2}},
		{0b11011011, {10, 2}},
		{0b11010110, {11, 2}},
		{0b00000000, {0, 3}},
		{0b00001000, {1, 3}},
		{0b00011000, {2, 3}},
		{0b00010000, {3, 3}},
		{0b01011110, {4, 3}},
		{0b01111000, {5, 3}},
		{0b11011000, {6, 3}},
		{0b01011011, {7, 3}},
		{0b01101000, {8, 3}},
		{0b11111000, {9, 3}},
		{0b11111010, {10, 3}},
		{0b11010000, {11, 3}},

		{0b00000110, {0, 0}},
		{0b00000011, {0, 0}},
		{0b11000000, {0, 2}},
		{0b01100000, {0, 2}},
		{0b00101000, {1, 3}},
		{0b00001001, {1, 3}},
		{0b10010000, {3, 3}},
		{0b00010100, {3, 3}},

		{0b00111111, {10, 0}},
		{0b10011111, {10, 0}},
		{0b11111100, {9, 3}},
		{0b11111001, {9, 3}},
		{0b11110110, {11, 2}},
		{0b11010111, {11, 2}},
		{0b01101111, {8, 1}},
		{0b11101011, {8, 1}},

		{0b11010100, {11, 3}},
		{0b11110000, {11, 3}},
		{0b11110100, {11, 3}},
		{0b11101001, {8, 3}},
		{0b01101001, {8, 3}},
		{0b11101000, {8, 3}},
		{0b00001111, {8, 0}},
		{0b00101111, {8, 0}},
		{0b00101011, {8, 0}},
		{0b00010111, {11, 0}},
		{0b10010111, {11, 0}},
		{0b10010110, {11, 0}},

		{0b11000010, {0, 1}},
		{0b01100010, {0, 1}},
		{0b01000110, {0, 1}},
		{0b01000011, {0, 1}},
		{0b10011100, {2, 3}},
		{0b10011001, {2, 3}},
		{0b00011101, {2, 3}},
		{0b00111100, {2, 3}},
		{0b00111000, {2, 3}},
		{0b10011000, {2, 3}},
		{0b00011001, {2, 3}},
		{0b00111001, {2, 3}},
		{0b00011100, {2, 3}},
	};

	explicit MapRenderer(Map& map);
	void draw(sf::RenderTarget& target, sf::RenderStates states) const override;
	[[nodiscard]] uint8_t getTileSides(Map& map, uint16_t row, uint16_t column) const;
};